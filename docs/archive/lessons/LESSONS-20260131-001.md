# AGSP v3.2 設営知見記録

**電番:** LESSONS-20260131-001  
**作成日:** 2026-01-31  
**作戦:** QUARTER_VIEW_GENESIS

---

## 一、概要

本文書は、作戦「QUARTER_VIEW_GENESIS」の設営過程で得られた知見を記録し、AGSPの次期改定に活かすことを目的とする。

---

## 二、設営プロセスの実績

### 2.1 参謀会議フェーズ

| 工程 | 所要時間（概算） | 成果物 |
|------|-----------------|--------|
| 参謀本部起動 | 5分 | 3AI起動完了報告 |
| 諮問プロンプト生成 | 5分 | 情報部長・作戦部長向けプロンプト |
| 両部長報告受領 | 10分 | 電報形式報告2通 |
| 統合・strategy.yaml作成 | 15分 | 作戦命令書 |
| 方面軍仕様書作成 | 20分 | SPEC 4ファイル |

**合計:** 約55分で参謀会議完了

### 2.2 連合艦隊編成フェーズ

| 工程 | 所要時間（概算） | 成果物 |
|------|-----------------|--------|
| プロジェクトディレクトリ作成 | 5分 | ディレクトリ構造 |
| 基盤ファイル作成 | 10分 | pyproject.toml, README.md, CLAUDE.md |
| 仕様書配置 | 5分 | docs/specs/, docs/strategy/ |
| 起動プロンプト作成 | 5分 | FLEET_COMMANDER_STARTUP.md |

**合計:** 約25分で設営完了

---

## 三、得られた知見

### 3.1 ファイル同期問題

**問題:** 参謀総長（Claude Desktop）がローカルで作成したファイルが、リモートマシンに自動同期されない。

**原因:**
- Claude Desktopのファイルシステムアクセスは許可されたパスのみ
- ローカル（Windows）とリモート（Linux）のリポジトリは別物
- gitによる同期が必要だが、参謀会議中は実施されない

**対策案:**
1. **作戦基地を最初に決定する** - 参謀会議開始前に、Claude Codeが作業するリモートパスを確定させる
2. **参謀総長は直接リモートに書き込む** - 許可パスにリモートを追加
3. **設営テンプレートを用意する** - 空のプロジェクト構造をスクリプトで生成

**推奨:** 案1を採用。幕僚長が最初に「作戦基地パス」を指定する運用とする。

### 3.2 起動プロンプトの配置場所

**問題:** 起動プロンプトをどこに配置すべきか不明確だった。

**決定:**
- AGSP本体: `prompts/to_fleet/fleet_commander_startup.md` （汎用テンプレート）
- 各プロジェクト: `FLEET_COMMANDER_STARTUP.md` （作戦固有の起動プロンプト）

### 3.3 ECC統合の手順

**確立した手順:**
1. プロジェクトに `.claude/` ディレクトリ作成
2. ECCへのシンボリックリンク作成（agents, rules, skills, commands, hooks）
3. `CLAUDE.md` にAGSP統合を明記

**改善案:** シンボリックリンク作成スクリプトをAGSPに追加する。

### 3.4 情報部長の警告の有効性

**事例:** 情報部長（ChatGPT）が「Zオーダーが最大の地雷」と警告。

**対応:** 参謀総長がこれを重視し、strategy.yamlに `depth_specification` を初期設計として組み込んだ。

**教訓:** 情報部長のリスク評価は、設計段階で必ず反映すべき。

---

## 四、AGSP改定提案

### 4.1 新規追加ファイル

| ファイル | 内容 |
|----------|------|
| `scripts/setup_project.sh` | プロジェクト構造自動生成 |
| `scripts/link_ecc.sh` | ECCシンボリックリンク作成 |
| `templates/project/` | プロジェクトテンプレート一式 |

### 4.2 README.md追記事項

**「作戦開始手順」セクションの追加:**

```markdown
## 作戦開始手順

### Step 0: 作戦基地の決定（重要）
参謀会議開始前に、以下を決定してください：
- 作戦基地パス（Claude Codeが作業するディレクトリ）
- リポジトリ名

### Step 1: 参謀本部起動
...（既存の手順）
```

### 4.3 strategy.yaml拡張

```yaml
# 作戦基盤情報（新規追加）
project:
  name: "project-name"
  path: "/path/to/project"
  repository: "git@github.com:user/repo.git"
  ecc_path: "/path/to/everything-claude-code"
```

### 4.4 電報形式の拡張

**新種別追加:**

| 種別 | 用途 |
|------|------|
| `LESSONS` | 知見記録 |
| `DEPLOY` | 設営完了報告 |

---

## 五、次期改定での実装優先度

| 優先度 | 項目 | 理由 |
|--------|------|------|
| 1 | Step 0（作戦基地決定）の明文化 | 同期問題の根本解決 |
| 2 | setup_project.sh 作成 | 設営工数削減 |
| 3 | link_ecc.sh 作成 | ECC統合の標準化 |
| 4 | project セクション追加 | 作戦情報の完全性 |

---

## 六、参照

- 作戦: QUARTER_VIEW_GENESIS
- 作戦基地: `/home/owner/work/duo-talk-ecosystem/duo-talk-qview`
- 参謀会議ログ: 本チャットセッション

---

以上
